<app-modal [hidden]="!showModal">
    <div class="modal-header d-flex flex-row justify-content-between">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Registration</h1>
        <button type="button" class="btn rounded-5-close" (click)="showModal=false"><app-icon icon="x" size="2rem" ></app-icon></button>
    </div>
<div class="modal-body">
<form [formGroup]="registerForm" class="form">
    <div class="form-group">
        <label class="form-label" for="name">Name</label>
        <input placeholder="Enter your name" class="form-control" type="text" id="name" name="name" formControlName="name" required>
        @if (registerForm.get('name')?.dirty) {
        <span *ngIf="registerForm.get('name')?.errors?.['required']">Name is required</span>
        <span *ngIf="registerForm.get('name')?.errors?.['minlength']">Name must be at least 1 character long</span>
        }
    </div>
    <div class="form-group">
        <label class="form-label" for="email">Email</label>
        <input placeholder="Enter your email" class="form-control" type="email" id="email" name="email" formControlName="email" required>
        @if(registerForm.get('email')?.dirty ) {
        <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</span>
        <span *ngIf="registerForm.get('email')?.errors?.['email']">Email is invalid</span>
        <span *ngIf="registerForm.get('email')?.errors?.['emailTaken']">Email is already registered to an account</span>
        }
    </div>
    <div class="form-group">
        <label class="form-label" for="password">Password</label>
        <input placeholder="Enter a password" class="form-control" type="password" id="password" name="password" formControlName="password" required>
        @if(registerForm.get('password')?.dirty ) {
        <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 5 characters long</span>
        <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</span>
        }
    </div>
    <div class="form-group">
        <label class="form-label" for="role">Role</label>
        <select class="form-control"  id="role" name="role" formControlName="role" required>
            <option value="USER">User</option>
            <option value="STAFF">Staff</option>
            <option value="ADMIN">Admin</option>
        </select>
        @if(registerForm.get('role')?.dirty ) {
        <span *ngIf="registerForm.get('role')?.errors?.['required']">Role is required</span>
        }
    </div>
</form>
</div>
<div class="modal-footer">
    <button type="button" class="btn rounded-5 btn-secondary" (click)="showModal=false">Cancel</button>
    <button type="button" class="btn rounded-5 btn-primary" (click)="onSubmit()" [disabled]="!registerForm.valid">Register</button>
</div>
</app-modal>